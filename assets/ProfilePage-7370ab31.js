import{p as H,q as D,t as q,r as l,I as J,R as W,v as _,w as K,x as Q,y as Y,n as O,z as G,j as I,F as X,e as g,B as Z,T as z,Q as V}from"./index-5f314384.js";import{B as M}from"./Box-b761e9c8.js";import{a as ee}from"./axios-aba6f0e0.js";import{u as ne}from"./useForm-a23e1795.js";import E from"./Button-7d14c08a.js";import te from"./ProgressLinear-38399fd9.js";import{C as F}from"./TextField-fa0a5117.js";import"./TransitionGroupContext-bd42b5cc.js";import"./useForkRef-9ca0de2f.js";import"./useIsFocusVisible-a287826f.js";import"./useTheme-ae63015e.js";function re(){if(console&&console.warn){for(var t,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];typeof n[0]=="string"&&(n[0]="react-i18next:: ".concat(n[0])),(t=console).warn.apply(t,n)}}var R={};function B(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];typeof e[0]=="string"&&R[e[0]]||(typeof e[0]=="string"&&(R[e[0]]=new Date),re.apply(void 0,e))}function U(t,e,n){t.loadNamespaces(e,function(){if(t.isInitialized)n();else{var a=function i(){setTimeout(function(){t.off("initialized",i)},0),n()};t.on("initialized",a)}})}function ae(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=e.languages[0],i=e.options?e.options.fallbackLng:!1,u=e.languages[e.languages.length-1];if(a.toLowerCase()==="cimode")return!0;var r=function(c,s){var m=e.services.backendConnector.state["".concat(c,"|").concat(s)];return m===-1||m===2};return n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!r(e.isLanguageChangingTo,t)?!1:!!(e.hasResourceBundle(a,t)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||r(a,t)&&(!i||r(u,t)))}function oe(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e.languages||!e.languages.length)return B("i18n.languages were undefined or empty",e.languages),!0;var a=e.options.ignoreJSONStructure!==void 0;return a?e.hasLoadedNamespace(t,{precheck:function(u,r){if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&u.services.backendConnector.backend&&u.isLanguageChangingTo&&!r(u.isLanguageChangingTo,t))return!1}}):ae(t,e,n)}function ie(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,i,u,r,o=[],c=!0,s=!1;try{if(u=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=u.call(n)).done)&&(o.push(a.value),o.length!==e);c=!0);}catch(m){s=!0,i=m}finally{try{if(!c&&n.return!=null&&(r=n.return(),Object(r)!==r))return}finally{if(s)throw i}}return o}}function se(t,e){return H(t)||ie(t,e)||D(t,e)||q()}function $(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,a)}return n}function A(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$(Object(n),!0).forEach(function(a){K(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}var ue=function(e,n){var a=l.useRef();return l.useEffect(function(){a.current=n?a.current:e},[e,n]),a.current};function ce(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.i18n,a=l.useContext(J)||{},i=a.i18n,u=a.defaultNS,r=n||i||Q();if(r&&!r.reportNamespaces&&(r.reportNamespaces=new W),!r){B("You will need to pass in an i18next instance by using initReactI18next");var o=function(v,p){return typeof p=="string"?p:p&&Y(p)==="object"&&typeof p.defaultValue=="string"?p.defaultValue:Array.isArray(v)?v[v.length-1]:v},c=[o,{},!1];return c.t=o,c.i18n={},c.ready=!1,c}r.options.react&&r.options.react.wait!==void 0&&B("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var s=A(A(A({},_()),r.options.react),e),m=s.useSuspense,j=s.keyPrefix,f=t||u||r.options&&r.options.defaultNS;f=typeof f=="string"?[f]:f||["translation"],r.reportNamespaces.addUsedNamespaces&&r.reportNamespaces.addUsedNamespaces(f);var b=(r.isInitialized||r.initializedStoreOnce)&&f.every(function(h){return oe(h,r,s)});function y(){return r.getFixedT(null,s.nsMode==="fallback"?f:f[0],j)}var T=l.useState(y),N=se(T,2),C=N[0],S=N[1],x=f.join(),d=ue(x),w=l.useRef(!0);l.useEffect(function(){var h=s.bindI18n,v=s.bindI18nStore;w.current=!0,!b&&!m&&U(r,f,function(){w.current&&S(y)}),b&&d&&d!==x&&w.current&&S(y);function p(){w.current&&S(y)}return h&&r&&r.on(h,p),v&&r&&r.store.on(v,p),function(){w.current=!1,h&&r&&h.split(" ").forEach(function(k){return r.off(k,p)}),v&&r&&v.split(" ").forEach(function(k){return r.store.off(k,p)})}},[r,x]);var L=l.useRef(!0);l.useEffect(function(){w.current&&!L.current&&S(y),L.current=!1},[r,j]);var P=[C,r,b];if(P.t=C,P.i18n=r,P.ready=b,b||!b&&!m)return P;throw new Promise(function(h){U(r,f,function(){h()})})}const fe=t=>{var C,S;const{t:e}=ce(),n=()=>V(e("currentUserProfileUpdated")),a={},{user:i,getAccessTokenSilently:u,logout:r}=G(),[o,c]=l.useState({}),[s,m]=l.useState(!0),[j,f]=l.useState("");l.useEffect(()=>{const x=async()=>{try{const d=await u({authorizationParams:{audience:"https://dev-ng6aspsfdhghv3u2.us.auth0.com/api/v2/",scope:"read:current_user update:current_user_metadata"}});f(d);const w=`https://dev-ng6aspsfdhghv3u2.us.auth0.com/api/v2/users/${i==null?void 0:i.sub}`,P=await(await fetch(w,{headers:{Authorization:`Bearer ${d}`}})).json();c(P),m(!1)}catch(d){console.log(d.message)}};m(!0),x()},[u,i==null?void 0:i.sub]);const b=async()=>{const x={method:"PATCH",url:`https://dev-ng6aspsfdhghv3u2.us.auth0.com/api/v2/users/${o.user_id}`,headers:{authorization:"Bearer "+j,"content-type":"application/json"},data:{user_metadata:{...N}}};await ee.request(x).then(d=>{n(),console.log("response",d)}).catch(d=>{console.error(d)})},{onChange:y,onSubmit:T,values:N}=ne(b,a);return I(X,{children:[g(te,{isLoading:s}),s?g("div",{}):I(de,{children:[I(pe,{children:[g(ge,{src:o==null?void 0:o.picture,alt:o==null?void 0:o.name,width:110}),I(Z,{children:[g(z,{variant:"h2",children:o==null?void 0:o.name}),g(z,{variant:"h5",children:o==null?void 0:o.email})]})]}),g(F,{className:"profile-input",changeHandler:y,defaultValue:(C=o==null?void 0:o.user_metadata)==null?void 0:C.address,label:"Address",name:"address",type:"text"}),g(F,{className:"profile-input",changeHandler:y,defaultValue:(S=o==null?void 0:o.user_metadata)==null?void 0:S.phone_number,label:"Phone number",name:"phone_number",type:"text"}),I(le,{children:[g(E,{type:"button",variant:"contained",onClick:T,children:"Sauvegarder"}),g(E,{type:"button",variant:"outlined",onClick:()=>r({logoutParams:{returnTo:window.location.origin}}),children:"Se dÃ©connecter"})]})]})]})},le=O.div`
  display: flex;
  justify-content: space-between;
  button {
    width: 45%;
  }
`,de=O.div`
  .profile-input {
    margin-bottom: 20px;
  }
`,pe=O.div`
  display: flex;
  margin-bottom: 20px;

  div {
    width: 100%;
    padding-left: 15px;

    h2,
    h5 {
      margin: 0;
    }
  }
`,ge=O.img`
  border-radius: 50%;
`,je=()=>g(M,{children:g(fe,{})});export{je as default};
